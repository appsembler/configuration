#!/usr/bin/env bash

# {{ ansible_managed }}

export LANG="{{ EDXAPP_LANG }}"
export DJANGO_SETTINGS_MODULE="{{ EDXAPP_LMS_ENV }}"
export SERVICE_VARIANT="lms"
export PATH="{{ edxapp_deploy_path }}"
export BOTO_CONFIG="{{ edxapp_app_dir }}/.boto"

{% set edxapp_venv_bin = edxapp_venv_dir + "/bin" %}
source {{ edxapp_app_dir }}/edxapp_env
{% set executable = edxapp_venv_bin + '/celery' %}

# We exec so that celery is the child of supervisor and can be managed properly

exec {{ executable }} $@
